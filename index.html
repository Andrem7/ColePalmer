<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cole Palmer</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Authentication Header -->
    <header class="auth-header">
        <div class="auth-container">
            <div id="user-info" style="display: none;"></div>
            <button id="auth-button">Sign In</button>
            <a href="chat.html" id="chat-link" style="display: none;" class="chat-link">ðŸ’¬ Chat with Cole</a>
        </div>
    </header>

    <div class="container">
        <div class="content">
            <h1>Cole Palmer</h1>
            <p class="subtitle">Chelsea FC â€¢ Attacking Midfielder â€¢ England International</p>
            
            <div class="bio-section">
                <p>Born 6 May 2002 in Wythenshawe, Manchester. At 23, Cole Palmer has established himself as one of the Premier League's most exciting talents, breaking records and winning prestigious awards since his Â£40 million transfer from Manchester City to Chelsea in September 2023.</p>
            </div>

            <nav class="navigation">
                <a href="career.html" class="nav-link" data-page="career">Career Highlights</a>
                <a href="stats.html" class="nav-link" data-page="stats">Statistics & Records</a>
                <a href="awards.html" class="nav-link" data-page="awards">Awards & Recognition</a>
                <a href="international.html" class="nav-link" data-page="international">International Career</a>
                <a href="videos.html" class="nav-link" data-page="videos">Videos & Highlights</a>
                <a href="timeline.html" class="nav-link" data-page="timeline">Career Timeline</a>
            </nav>

            <!-- Comments Section -->
            <section id="comments-section" class="comments-section" style="display: none;">
                <h3>Fan Comments</h3>
                
                <form id="comment-form" class="comment-form">
                    <textarea id="comment-input" placeholder="Share your thoughts about Cole Palmer..." required></textarea>
                    <button type="submit">Post Comment</button>
                </form>
                
                <div id="comments-container" class="comments-container">
                    <!-- Comments will be loaded here -->
                </div>
            </section>
        </div>
    </div>

    <!-- Authentication Modal -->
    <div id="auth-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <span class="close" onclick="hideSignInModal()">&times;</span>
            <h2>Sign In</h2>
            
            <button onclick="signInWithGoogle()" class="google-signin-btn">
                Sign in with Google
            </button>
            
            <div class="divider">or</div>
            
            <form id="email-signin-form">
                <input type="email" id="signin-email" placeholder="Email" required>
                <input type="password" id="signin-password" placeholder="Password" required>
                <button type="submit">Sign In</button>
                <button type="button" onclick="showSignUpForm()">Don't have an account? Sign Up</button>
            </form>
            
            <form id="email-signup-form" style="display: none;">
                <input type="email" id="signup-email" placeholder="Email" required>
                <input type="password" id="signup-password" placeholder="Password" required>
                <button type="submit">Sign Up</button>
                <button type="button" onclick="showSignInForm()">Already have an account? Sign In</button>
            </form>
        </div>
    </div>
    
    <!-- Firebase SDK CDN -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>

    <script>
        // Firebase configuration - Replace with your actual Firebase config
        const firebaseConfig = {
          apiKey: "YOUR_FIREBASE_API_KEY",
          authDomain: "YOUR_PROJECT.firebaseapp.com",
          databaseURL: "https://YOUR_PROJECT-default-rtdb.firebaseio.com",
          projectId: "YOUR_PROJECT_ID",
          storageBucket: "YOUR_PROJECT.firebasestorage.app",
          messagingSenderId: "YOUR_MESSAGING_SENDER_ID",
          appId: "YOUR_APP_ID",
          measurementId: "YOUR_MEASUREMENT_ID"
        };

        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const db = firebase.firestore();
        
        // Auth state management
        let currentUser = null;
        
        // Google Auth Provider
        const googleProvider = new firebase.auth.GoogleAuthProvider();
        
        // Sign in with Google
        async function signInWithGoogle() {
            try {
                const result = await auth.signInWithPopup(googleProvider);
                const user = result.user;
                console.log('Signed in:', user.displayName);
                updateUI(user);
                hideSignInModal();
                return user;
            } catch (error) {
                console.error('Google sign-in error:', error);
                alert('Sign-in failed: ' + error.message);
            }
        }
        
        // Sign in with Email/Password
        async function signInWithEmail(email, password) {
            try {
                const result = await auth.signInWithEmailAndPassword(email, password);
                console.log('Signed in:', result.user.email);
                updateUI(result.user);
                return result.user;
            } catch (error) {
                console.error('Email sign-in error:', error);
                alert('Sign-in failed: ' + error.message);
            }
        }
        
        // Sign up with Email/Password
        async function signUpWithEmail(email, password) {
            try {
                const result = await auth.createUserWithEmailAndPassword(email, password);
                console.log('Signed up:', result.user.email);
                updateUI(result.user);
                return result.user;
            } catch (error) {
                console.error('Sign-up error:', error);
                alert('Sign-up failed: ' + error.message);
            }
        }
        
        // Sign out
        async function signOutUser() {
            try {
                await auth.signOut();
                console.log('Signed out');
                updateUI(null);
            } catch (error) {
                console.error('Sign-out error:', error);
            }
        }
        
        // Update UI based on auth state
        function updateUI(user) {
            const authButton = document.getElementById('auth-button');
            const userInfo = document.getElementById('user-info');
            const commentsSection = document.getElementById('comments-section');
            const chatLink = document.getElementById('chat-link');
            
            if (user) {
                currentUser = user;
                authButton.textContent = 'Sign Out';
                authButton.onclick = signOutUser;
                
                if (userInfo) {
                    userInfo.innerHTML = `
                        <img src="${user.photoURL || '/default-avatar.png'}" alt="Profile" class="profile-pic">
                        <span>Welcome, ${user.displayName || user.email}!</span>
                    `;
                    userInfo.style.display = 'block';
                }
                
                if (commentsSection) commentsSection.style.display = 'block';
                if (chatLink) chatLink.style.display = 'inline-block';
                
            } else {
                currentUser = null;
                authButton.textContent = 'Sign In';
                authButton.onclick = showSignInModal;
                
                if (userInfo) userInfo.style.display = 'none';
                if (commentsSection) commentsSection.style.display = 'none';
                if (chatLink) chatLink.style.display = 'none';
            }
        }
        
        // Show sign-in modal
        function showSignInModal() {
            const modal = document.getElementById('auth-modal');
            if (modal) {
                modal.style.display = 'block';
            }
        }
        
        // Hide sign-in modal
        function hideSignInModal() {
            const modal = document.getElementById('auth-modal');
            if (modal) {
                modal.style.display = 'none';
            }
        }
        
        // Listen for auth state changes
        auth.onAuthStateChanged((user) => {
            updateUI(user);
        });
        
        // Make functions global
        window.signInWithGoogle = signInWithGoogle;
        window.hideSignInModal = hideSignInModal;
        window.showSignInModal = showSignInModal;
        
        // Handle email sign in form
        document.getElementById('email-signin-form').addEventListener('submit', async (e) => {
            e.preventDefault();
            const email = document.getElementById('signin-email').value;
            const password = document.getElementById('signin-password').value;
            await signInWithEmail(email, password);
            hideSignInModal();
        });
        
        // Handle email sign up form
        document.getElementById('email-signup-form').addEventListener('submit', async (e) => {
            e.preventDefault();
            const email = document.getElementById('signup-email').value;
            const password = document.getElementById('signup-password').value;
            await signUpWithEmail(email, password);
            hideSignInModal();
        });
        
        // Form switching functions
        window.showSignUpForm = () => {
            document.getElementById('email-signin-form').style.display = 'none';
            document.getElementById('email-signup-form').style.display = 'block';
        };
        
        window.showSignInForm = () => {
            document.getElementById('email-signup-form').style.display = 'none';
            document.getElementById('email-signin-form').style.display = 'block';
        };
    </script>
    <script src="script.js"></script>
</body>
</html>